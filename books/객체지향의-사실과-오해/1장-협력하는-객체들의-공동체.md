
> 🫵🏻 이 글은 “객체지향의 사실과 오해”를 참고하여,
> 제 언어로 재정리한 학습 노트입니다.
>
> 작성 목적 : 개인 학습 및 이해 정리

> 
> 객체 지향이란 뭘까?
> 
> 객체 지향 언어를 사용하는 나는, 과연 나만의 정의를 내릴 수 있나?
> 
> 이 책을 읽은 후 "객체 지향"에 대한 나만의 답을 꼭 내려보자!

이 장에서는 현실 세계의 개념을 빗대어 객체 지향의 3가지 관점인 "역할, 책임, 협력"을 설명하고 있다
개인적으로는 이 책에 나왔던 "커피 공화국"이라는 비유가 너무 재밌고 좋았다...작가님은 천재인가보다

## 역할, 책임, 협력 ?
현실 세계의 개념을 100% 객체 지향과 연관 지을 수는 없긴 하다.
그도 그럴 것이, 예를 들어 실세계에서는 방화벽이 불을 막는 것인데, 네트워크에서는 바이러스를 막는다는 개념을 가지고 있다.
즉, 객체 세상과 실세계는 100% 들어 맞지 않는다.

그럼에도 실세계의 비유를 들어 이를 설명하고자 하는 것은, 이 둘이 "역할, 책임, 협력"이라는 비슷한 키워드로 구성되어 있기 때문이다.

### 실세계에서의 역할, 책임 협력
내가 요즘 제일 좋아하는 코코리코 빵집을 예시로 들어보자.

<img src="images/1장/코코리코.jpg" width="50%" alt="코코리코">

빵집에는 손님, 캐셔, 빵을 만드는 주방장 세 명이 각자의 역할을 가지고 일을 수행한다

손님이 빵을 주문하면 캐셔는 주방장이 만든 빵을 건넨다.
빵이 없으면 캐셔가 주방장에게 추가 빵을 요청하고
주방장은 요청이 들어오면 빵을 return 해준다.

즉, 이 세 명의 사람들은 각각의 역할에 맞춰 요청을 하고, 응답을 받는다.
또한, 자신의 역할이 아닌 것일 경우는 "협력"을 구해서 빵 판매라는 하나의 큰 시스템을 구성한다.

자, 이 실세계에서의 역할, 책임, 협력을 객체의 개념으로 끌고 온다면, 이게 바로 "객체지향"인 것이다!

#### 중요 개념
빵집의 예시에서 우리는 다음과 같은 것을 살펴볼 수 있다

1. 여러 사람이 동시에 역할을 수행할 수 있다.
- 손님 입장에서는 원하는 빵을 살 수만 있다면 어떤 캐셔가 주문을 받는지는 중요하지 않다.
- 캐셔 입장에서도 손님이 원하는 빵을 팔 수 있다면 어떤 주방장이 만드는지는 중요하지 않다.
2. 역할은 대체 가능성을 의미한다.
- 만약 캐셔가 그만둔다면? 동일한 역할을 수행할 다른 사람을 데려오면 된다.
3. 책임을 수행하는 방법은 자율적으로 선택이 가능하다.
- 손님이 원하는 빵을 내줄 수 있다면, 그 중간 과정은 선택하기 나름이다.
- 이처럼 동일한 요청에 대해 서로 다른 방식으로 응답할 수 있는 능력을 **다형성**이라고 한다.
4. 한 사람이 동시에 여러 역할을 수행할 수 있다.

## 협력 속에 사는 객체

위에서 객체의 역할을 실세계에서 빗대서 설명했다.
실제로, 인간의 세계에서 사람이 없으면 역할, 책임, 협력이 아무런 의미가 없는 것 처럼 객체가 존재하지 않는 객체 지향 세계 역시 아무런 의미가 없다.

즉, 객체 지향의 세계에서 중심이 되는 것은 당연히 **객체**이며, 객체 지향 애플리케이션의 아름다움을 결정하는 것이 협력이라면 그 협력이 얼마나 조화를 이루는 지를 결정하는 것이 바로 **객체의 품질**인 것이다.

### 객체의 품질

객체는 해당 두 가지 덕목 사이에서 균형을 유지해갸 **좋은 품질**의 객체가 될 수 있다.

> 1. 객체는 충분히 협력적이어야 한다.
> 2. 객체는 충분히 자율적이어야 한다.

결국, 다른 객체와 협력할 수 있을 만큼 충분히 개방적인 동시에 협력에 참여하는 방법을 스스로 결정할 수 있을 만큼 충분히 자율적인 객체들의 공동체를 설계하는 것이 객체 지향 설계의 핵심이라고 할 수 있다.

### 그렇다면 객체의 **자율성**을 보장하려면 어떻게 해야 하는데?

객체의 자율성을 보장하려면, 객체의 **내부와 외부**를 명확하게 구분하는 것이 좋다.

객체는 다른 객체가 **무엇을(WHAT)** 수행하는지는 알 수 있지만 **어떻게(HOW)** 수행하는지에 대해서는 알 수 없어야 한다. 이는 **캡슐화**라는 개념과도 연결된다.

> 마치 코코리코의 빵집에서 단호박 크림치즈 깡파뉴를 결과물로 만든다는 것은 알지만, 그 빵을 만들기 위해 어떤 재료를 쓰고, 어떤 과정을 거치는지는 알 수 없고 제빵사의 영역이라는 것과 같다.
> 
> 이렇게 명확히 구분 해야만, 객체는 그 안에서 자율성을 가질 수 있는 것이다.

또한, 수행하는 방법을 스스로 알기 위해서는 수행하기 위해 필요한 상태를 반드시 포함해야 한다. 깡파뉴를 만드는데 만드는 방법(상태)을 모르는 것은 말이 안되지 않는가?

즉, 객체는 상태와 행위를 하나로 묶는 자율적인 존재라고 정리할 수 있다.

### 협력과 메세지와 메서드 그리고 자율성을 곁들인...

사람끼리 협력을 요청할때는 여러 연락 수단을 사용한다. 

객체끼리 협력을 위해서는 **메세지**를 사용하는데, 이때 메세지를 전송하는 객체를 송신자라고 하고, 수신하는 객체를 수신자라고 한다.

또한, 객체가 수신된 메세지를 처리하는 방법을 우리가 잘 아는 **메서드(method)** 라고 한다.

앞에서 객체의 자율성을 보장하기 위해서는 어떻게 수행하는지를 몰라야 한다고 말한 바 있다. 이 수행에 관한 부분이 바로 메서드이다.

즉, **외부의 요청이 무엇인지를 표현하는 메세지와 요청을 처리하기 위한 구체적인 방법인 메서드를 분리해서 표현하는 것**이 객체 지향에서 자율성을 높이는 핵심 매커니즘이라고 할 수 있다.

### 그래서 객체 지향의 본질이 뭔데?

그래서 객체 지향의 본질이 무엇인가? 지금까지 얘기한 바를 정리하면 다음과 같다.

> 1. 객체지향이란 시스템을 상호작용하는 **자율적인 객체들의 공동체**로 바라보고 객체를 이용해 시스템을 분할하는 방법이다.
> 2. 자율적인 객체란, **상태와 행위**를 함께 지니며 스스로 자기 자신을 책임지는 객체를 말한다. 
> 3. 객체는 시스템의 행위를 구현하기 위해 다른 객체와 **협력**한다. 각 객체는 협력 내에서 정해진 **역할**을 수행하며 역할은 관련된 **책임**의 집합이다.
> 4. 객체는 다른 객체와 협력하기 위해 메세지를 전송하고, **메세지**를 수신한 객체는 메세지를 처리하는데 적합한 메서드를 자율적으로 선택한다.

### 클래스에 대한 오해

객체 지향에서 흔한 오해 중에 하나가 바로 **클래스에 집착**하는 것이다. 

물론 클래스는 객체 지향 언어에서 중요한 개념 중에 하나인 것은 분명하다. 

그러나 자바 스크립트 같은 프로토타입 기반의 객체 지향 언어(객체를 복제해서 새로운 객체를 만드는)에서는 클래스가 존재하지 않으며 오직 **객체**만이 존재한다. 

상속 역시 클래스가 아닌 **객체 간의 위임** 매커니즘을 기본으로 한다.

즉, 중심은 클래스가 아니라 **객체**가 되어야 한다는 것이다!!

> 훌륭한 객체지향 설계자가 되기 위해서는 가장 먼저 **코드를 담는 클래스**의 관점에서 **메세지를 주고받는 객체의 관점**으로 사고의 중심을 전환하는 것이다. 
> 
> 즉, 중요한 것은 객체 지향의 수단인 클래스가 아니라, 그 본질인 **메세지를 주고 받는 객체들의 동적인 관계**이다. 